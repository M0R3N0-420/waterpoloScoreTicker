# Waterpolo Games Dashboard

Un dashboard en tiempo real para mostrar partidos de waterpolo con diferentes estados (EN VIVO, FINALIZADO, PROGRAMADO) y navegaciÃ³n horizontal responsiva.

## ğŸ“‹ Tabla de Contenidos

- [CaracterÃ­sticas](#caracterÃ­sticas)
- [Stack TecnolÃ³gico](#stack-tecnolÃ³gico)
- [Estructura del Proyecto](#estructura-del-proyecto)
- [InstalaciÃ³n](#instalaciÃ³n)
- [ConfiguraciÃ³n de Base de Datos](#configuraciÃ³n-de-base-de-datos)
- [GuÃ­a para Principiantes](#guÃ­a-para-principiantes)
- [GuÃ­a TÃ©cnica](#guÃ­a-tÃ©cnica)
- [Componentes](#componentes)
- [Estados de Partidos](#estados-de-partidos)
- [PersonalizaciÃ³n](#personalizaciÃ³n)
- [Troubleshooting](#troubleshooting)

## ğŸš€ CaracterÃ­sticas

- **Cards de partidos** con informaciÃ³n completa (equipos, scores, competencia)
- **Tres estados**: EN VIVO (con animaciÃ³n), FINALIZADO, PROGRAMADO
- **NavegaciÃ³n horizontal** con flechas que aparecen on hover
- **DiseÃ±o responsivo** con scroll sin barra visible
- **Base de datos en tiempo real** con Supabase
- **Espaciado consistente** entre cards independientemente del estado
- **Arquitectura modular** con componentes reutilizables
- **Loading states** con spinner animado
- **CÃ³digo limpio** y mantenible
- **AlineaciÃ³n natural** de cards de izquierda a derecha
- **Variables de entorno seguras** para credenciales de API

## ğŸ›  Stack TecnolÃ³gico

- **Frontend**: React 19.2.0 + Vite 7.2.4
- **Estilos**: TailwindCSS 4.1.18
- **Base de Datos**: Supabase (PostgreSQL)
- **Cliente HTTP**: @supabase/supabase-js 2.91.1

## ğŸ“ Estructura del Proyecto

```
web-CPA-Med/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ supabase.js          # ConfiguraciÃ³n de Supabase
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ gamesService.js      # Funciones de API
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ WaterpoloGameCard.jsx # Componente de card de partido
â”‚   â”‚   â”œâ”€â”€ GamesContainer.jsx   # Contenedor con navegaciÃ³n
â”‚   â”‚   â”œâ”€â”€ NavigationArrows.jsx # Flechas de navegaciÃ³n
â”‚   â”‚   â””â”€â”€ LoadingSpinner.jsx   # Componente de carga
â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â””â”€â”€ mockGames.js          # Datos de ejemplo (obsoleto)
â”‚   â”œâ”€â”€ App.jsx                   # Componente principal
â”‚   â”œâ”€â”€ index.css                 # Estilos globales
â”‚   â””â”€â”€ main.jsx                  # Punto de entrada
â”œâ”€â”€ package.json
â”œâ”€â”€ vite.config.js
â””â”€â”€ README.md
```

## âš™ï¸ InstalaciÃ³n

### Prerrequisitos
- Node.js 18+ 
- npm o yarn
- Cuenta en Supabase

### Pasos de InstalaciÃ³n

1. **Clonar el repositorio**
   ```bash
   git clone <URL-del-repositorio>
   cd web-CPA-Med
   ```

2. **Instalar dependencias**
   ```bash
   npm install
   ```

3. **Configurar Supabase**
   - Crear proyecto en [supabase.com](https://supabase.com)
   - Crear tabla `games` (ver secciÃ³n de configuraciÃ³n)
   - Copiar URL y API key

4. **Configurar variables de entorno**
   ```bash
   # Crear archivo .env.local (no se sube a Git)
   VITE_SUPABASE_URL=tu-url-de-supabase
   VITE_SUPABASE_ANON_KEY=tu-api-key
   ```
   **Importante**: El archivo `.env.local` estÃ¡ protegido por `.gitignore` para mantener tus credenciales seguras

5. **Iniciar desarrollo**
   ```bash
   npm run dev
   ```

## ğŸ—„ï¸ ConfiguraciÃ³n de Base de Datos

### Crear Tabla en Supabase

```sql
CREATE TABLE games (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  date TEXT NOT NULL,
  time TEXT NOT NULL,
  competition TEXT NOT NULL,
  home_team TEXT NOT NULL,
  away_team TEXT NOT NULL,
  home_score BIGINT,
  away_score BIGINT,
  period BIGINT,
  status TEXT NOT NULL CHECK (status IN ('EN VIVO', 'FINALIZADO', 'PROGRAMADO')),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

### Campos Explicados

| Campo | Tipo | DescripciÃ³n |
|-------|------|-------------|
| `date` | TEXT | Fecha del partido (ej: "25 Ene") |
| `time` | TEXT | Hora del partido (ej: "7:00 PM") |
| `competition` | TEXT | Nombre de la competencia |
| `home_team` | TEXT | Equipo local |
| `away_team` | TEXT | Equipo visitante |
| `home_score` | BIGINT | Score del equipo local (nullable) |
| `away_score` | BIGINT | Score del equipo visitante (nullable) |
| `period` | BIGINT | PerÃ­odo actual (nullable) |
| `status` | TEXT | Estado del partido |

## ğŸ“š GuÃ­a para Principiantes

### Â¿CÃ³mo funciona este proyecto?

Este proyecto muestra partidos de waterpolo en tarjetas (cards). Cada tarjeta tiene:

1. **Estado y fecha**: Arriba a la izquierda el estado (EN VIVO, FINALIZADO o hora), arriba a la derecha la fecha
2. **Equipos y scores**: El equipo local primero con su score, luego el visitante
3. **Competencia y perÃ­odo**: Abajo, el nombre de la competencia y el perÃ­odo actual si estÃ¡ en vivo

### Â¿QuÃ© significan los colores y animaciones?

- **Punto rojo animado**: Partido EN VIVO
- **"FINALIZADO"**: Partido terminado con "FT" (Full Time)
- **Hora programada**: Partido por comenzar

### Â¿CÃ³mo navegar entre partidos?

- Pasa el mouse sobre el Ã¡rea de las tarjetas
- AparecerÃ¡n flechas en los extremos
- Haz clic en las flechas para navegar horizontalmente
- TambiÃ©n puedes usar el scroll del mouse/trackpad
- **Las cards comienzan desde la izquierda** con alineaciÃ³n natural

### Â¿CÃ³mo agregar nuevos partidos?

1. Ve a tu panel de Supabase
2. Entra a Table Editor â†’ tabla `games`
3. Haz clic en "Insert row"
4. Llena los datos del nuevo partido
5. La aplicaciÃ³n se actualizarÃ¡ automÃ¡ticamente

## ğŸ”§ GuÃ­a TÃ©cnica

### Flujo de Datos

1. **App.jsx** carga datos usando `fetchGames()` de `gamesService.js`
2. **gamesService.js** se conecta a Supabase usando el cliente configurado
3. **Supabase** retorna datos de la tabla `games`
4. **App.jsx** pasa los datos a **GamesContainer** como children
5. **GamesContainer** maneja navegaciÃ³n y renderiza **WaterpoloGameCard**
6. **LoadingSpinner** se muestra durante la carga de datos

### Estados React

```javascript
// App.jsx
const [games, setGames] = useState([])        // Array de partidos
const [loading, setLoading] = useState(true) // Estado de carga

// GamesContainer.jsx
const [showArrows, setShowArrows] = useState(false) // Visibilidad de flechas
```

### LÃ³gica de Componentes

#### WaterpoloGameCard.jsx

```javascript
const isLive = status === "EN VIVO"
const isFinished = status === "FINALIZADO"

// Renderizado condicional segÃºn estado
{isLive ? "EN VIVO" : isFinished ? "FINALIZADO" : time}
{(isLive || isFinished) ? score : '\u00A0'} // Espacio reservado
```

#### Servicios Supabase

```javascript
// Obtener todos los partidos
const { data, error } = await supabase
  .from('games')
  .select('*')
  .order('created_at', { ascending: false })
```

### Sistema de Estilos

- **TailwindCSS**: Framework de CSS utility-first
- **Clases personalizadas**: `.scrollbar-hide` para ocultar scrollbars
- **DiseÃ±o responsivo**: `min-w-max` + `overflow-x-auto`

## ğŸ¯ Componentes

### App.jsx

**Responsabilidades:**
- Estado principal de la aplicaciÃ³n (games, loading)
- Carga de datos desde Supabase
- Renderizado del layout principal

**Props:** Ninguno (componente raÃ­z)

### GamesContainer.jsx

**Responsabilidades:**
- Manejo de estado de navegaciÃ³n (showArrows)
- LÃ³gica de scroll horizontal
- Contenedor principal para las cards
- IntegraciÃ³n de NavigationArrows
- **AlineaciÃ³n de cards** de izquierda a derecha (justify-start)

**Props:**
```javascript
{
  children  // Componentes WaterpoloGameCard
}
```

### NavigationArrows.jsx

**Responsabilidades:**
- Renderizado de flechas de navegaciÃ³n
- Animaciones de apariciÃ³n/desapariciÃ³n
- Manejo de eventos de click

**Props:**
```javascript
{
  showArrows,    // boolean - visibilidad de flechas
  onScrollLeft,  // function - callback scroll izquierdo
  onScrollRight  // function - callback scroll derecho
}
```

### LoadingSpinner.jsx

**Responsabilidades:**
- Estado de carga con spinner animado
- Mensaje de carga para mejor UX
- Reutilizable en toda la aplicaciÃ³n

**Props:** Ninguno

### WaterpoloGameCard.jsx

**Responsabilidades:**
- Renderizado de informaciÃ³n de un partido
- LÃ³gica de estados (EN VIVO, FINALIZADO, PROGRAMADO)
- AnimaciÃ³n del indicador EN VIVO
- Espaciado consistente

**Props:**
```javascript
{
  date,           // "25 Ene"
  time,           // "7:00 PM"
  competition,    // "Liga Colombiana"
  homeTeam,       // "CPA Medellin"
  awayTeam,       // "Belen"
  homeScore,      // 13
  awayScore,      // 10
  period,         // 3
  status          // "EN VIVO"
}
```

### gamesService.js

**Responsabilidades:**
- ConexiÃ³n con Supabase
- Funciones CRUD para partidos
- Manejo de errores

**Funciones:**
- `fetchGames()`: Obtiene todos los partidos
- `createGame(data)`: Crea un nuevo partido

## ğŸ“Š Estados de Partidos

### EN VIVO
- **Visual**: Punto rojo animado + texto "EN VIVO"
- **Datos**: Muestra scores y perÃ­odo actual
- **Ejemplo**: `Q3` para tercer perÃ­odo

### FINALIZADO
- **Visual**: Texto "FINALIZADO"
- **Datos**: Muestra scores finales + "FT"
- **PerÃ­odo**: NULL

### PROGRAMADO
- **Visual**: Hora programada
- **Datos**: No muestra scores ni perÃ­odo
- **Espaciado**: Reserva espacio para consistencia visual

## ğŸ¨ PersonalizaciÃ³n

### Cambiar Colores

En `WaterpoloGameCard.jsx`:
```javascript
// Cambiar color del indicador EN VIVO
className="animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"

// Cambiar color de fondo
className="w-48 h-24 bg-blue-50 border border-blue-200"
```

### Modificar TamaÃ±o de Cards

```javascript
// En WaterpoloGameCard.jsx
className="w-56 h-28" // MÃ¡s grande
className="w-40 h-20" // MÃ¡s pequeÃ±o
```

### Cambiar AlineaciÃ³n de Cards

En `GamesContainer.jsx`:
```javascript
// AlineaciÃ³n a la izquierda (actual)
<div className="flex gap-4 items-center min-w-max justify-start py-4">

// AlineaciÃ³n centrada
<div className="flex gap-4 items-center min-w-max justify-center py-4">

// AlineaciÃ³n a la derecha
<div className="flex gap-4 items-center min-w-max justify-end py-4">
```

### Configurar Variables de Entorno

Para diferentes entornos:

```bash
# .env.local (desarrollo)
VITE_SUPABASE_URL=https://dev-project.supabase.co
VITE_SUPABASE_ANON_KEY=dev-key

# .env.production (producciÃ³n)
VITE_SUPABASE_URL=https://prod-project.supabase.co
VITE_SUPABASE_ANON_KEY=prod-key
```

### Agregar Nuevos Estados

1. Agregar a la validaciÃ³n SQL en Supabase
2. Agregar lÃ³gica en `WaterpoloGameCard.jsx`
3. Actualizar servicios si es necesario

## ğŸ› Troubleshooting

### Problemas Comunes

**1. No cargan los datos**
- Verificar conexiÃ³n a Supabase
- Revisar credenciales en `.env.local`
- Revisar tabla `games` exista
- **Verificar que .env.local no estÃ© en Git**

**2. Cards no muestran scores**
- Verificar nombres de campos: `home_team` vs `homeTeam`
- Revisar datos no sean NULL para partidos EN VIVO

**3. Scroll no funciona**
- Verificar CSS `.scrollbar-hide` estÃ© en `index.css`
- Revisar `overflow-x-auto` en contenedor

**4. Flechas no aparecen**
- Verificar estado `showArrows`
- Revisar eventos `onMouseEnter/Leave`

**5. Variables de entorno no funcionan**
- Verificar que el archivo se llame exactamente `.env.local`
- Reiniciar el servidor despuÃ©s de cambiar variables
- Verificar formato: `VITE_` prefix para Vite

**6. AlineaciÃ³n de cards incorrecta**
- Revisar clase `justify-start` en `GamesContainer.jsx`
- Verificar que no haya CSS conflictivo

### Herramientas de Debug

```javascript
// En App.jsx, agregar logs
useEffect(() => {
  console.log('Games loaded:', games)
}, [games])

// En gamesService.js
console.log('Supabase error:', error)
```

### VerificaciÃ³n de ConexiÃ³n

1. **Network Tab**: Buscar peticiones a Supabase
2. **Console**: Revisar errores de JavaScript
3. **Supabase Dashboard**: Verificar logs y conexiÃ³n

## ğŸš€ Despliegue

### Variables de Entorno para ProducciÃ³n

```bash
VITE_SUPABASE_URL=https://tu-proyecto.supabase.co
VITE_SUPABASE_ANON_KEY=tu-key-produccion
```

### Build para ProducciÃ³n

```bash
npm run build
npm run preview
```

## ğŸ“ Licencia

MIT License - Puedes usar este proyecto para fines comerciales y personales.

## ğŸ¤ Contribuir

1. Fork el proyecto
2. Crear feature branch
3. Hacer commit de cambios
4. Push al branch
5. Crear Pull Request

---

**Â¿Necesitas ayuda?** Revisa la secciÃ³n de Troubleshooting o abre un issue en el repositorio.
